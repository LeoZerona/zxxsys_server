# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
zxxsys_server/
â”‚
â”œâ”€â”€ src/                          # æ ¸å¿ƒåº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ app.py                    # Flask åº”ç”¨ä¸»æ–‡ä»¶ï¼ˆè·¯ç”±ã€ä¸­é—´ä»¶ç­‰ï¼‰
â”‚   â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç†ï¼ˆæ•°æ®åº“ã€é‚®ç®±ã€CORSç­‰ï¼‰
â”‚   â”œâ”€â”€ models.py                 # æ•°æ®æ¨¡å‹ï¼ˆUserã€EmailVerificationï¼‰
â”‚   â””â”€â”€ email_service.py          # é‚®ç®±æœåŠ¡ï¼ˆå‘é€éªŒè¯ç ç­‰ï¼‰
â”‚
â”œâ”€â”€ scripts/                      # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ database/                 # æ•°æ®åº“ç›¸å…³è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ init_db.py           # åˆå§‹åŒ–æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ create_users_table.py # åˆ›å»ºç”¨æˆ·è¡¨
â”‚   â”‚   â”œâ”€â”€ setup_test_db.py     # è®¾ç½®æµ‹è¯•æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ migrate_add_user_role.py # æ•°æ®åº“è¿ç§»è„šæœ¬
â”‚   â”‚
â”‚   â”œâ”€â”€ test/                     # æµ‹è¯•è„šæœ¬ï¼ˆåŠŸèƒ½æµ‹è¯•ï¼‰
â”‚   â”‚   â”œâ”€â”€ test_register_api.py # æ³¨å†ŒåŠŸèƒ½æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_email_api.py    # é‚®ç®±APIæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_send_verification_code.py # éªŒè¯ç å‘é€æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_verification_code_integration.py # é›†æˆæµ‹è¯•
â”‚   â”‚
â”‚   â””â”€â”€ utils/                    # å·¥å…·è„šæœ¬
â”‚       â”œâ”€â”€ check_database_config.py # æ£€æŸ¥æ•°æ®åº“é…ç½®
â”‚       â”œâ”€â”€ check_db.py           # æ£€æŸ¥æ•°æ®åº“è¿æ¥
â”‚       â”œâ”€â”€ query_users.py        # æŸ¥è¯¢ç”¨æˆ·æ•°æ®
â”‚       â”œâ”€â”€ æŸ¥è¯¢MySQLç”¨æˆ·è¡¨.py    # æŸ¥è¯¢MySQLç”¨æˆ·è¡¨
â”‚       â”œâ”€â”€ æŸ¥çœ‹éªŒè¯ç è¡¨.py       # æŸ¥çœ‹éªŒè¯ç è¡¨
â”‚       â”œâ”€â”€ æµ‹è¯•æ•°æ®åº“è¿æ¥.py     # æµ‹è¯•æ•°æ®åº“è¿æ¥
â”‚       â”œâ”€â”€ test_163_config.py    # æµ‹è¯•163é‚®ç®±é…ç½®
â”‚       â”œâ”€â”€ auto_create_repo.py   # è‡ªåŠ¨åˆ›å»ºGitHubä»“åº“
â”‚       â”œâ”€â”€ create_github_repo.py # åˆ›å»ºGitHubä»“åº“
â”‚       â””â”€â”€ åˆ‡æ¢æ•°æ®åº“.py         # åˆ‡æ¢æ•°æ®åº“ç±»å‹
â”‚
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ api/                      # API æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ API.md               # API æ¥å£æ–‡æ¡£
â”‚   â”‚   â””â”€â”€ å‰ç«¯å¯¹æ¥æ–‡æ¡£.md      # å‰ç«¯å¯¹æ¥æ–‡æ¡£
â”‚   â”‚
â”‚   â”œâ”€â”€ setup/                    # é…ç½®è¯´æ˜
â”‚   â”‚   â”œâ”€â”€ æ•°æ®åº“é…ç½®è¯´æ˜.md
â”‚   â”‚   â”œâ”€â”€ æ•°æ®åº“å¿«é€Ÿåˆ‡æ¢æŒ‡å—.md
â”‚   â”‚   â”œâ”€â”€ CORSé…ç½®è¯´æ˜.md
â”‚   â”‚   â”œâ”€â”€ é‚®ç®±é…ç½®è¯´æ˜.md
â”‚   â”‚   â”œâ”€â”€ é‚®ç®±é…ç½®è¯´æ˜-å¤šé‚®ç®±.md
â”‚   â”‚   â”œâ”€â”€ 163é‚®ç®±é…ç½®è¯´æ˜.md
â”‚   â”‚   â””â”€â”€ å¯†ç MD5åŠ å¯†è¯´æ˜.md
â”‚   â”‚
â”‚   â”œâ”€â”€ guides/                   # ä½¿ç”¨æŒ‡å—
â”‚   â”‚   â”œâ”€â”€ IMPLEMENTATION.md    # å®ç°è¯´æ˜
â”‚   â”‚   â”œâ”€â”€ å¿«é€Ÿé…ç½®æŒ‡å—.txt
â”‚   â”‚   â”œâ”€â”€ å¿«é€Ÿæµ‹è¯•é‚®ç®±åŠŸèƒ½.txt
â”‚   â”‚   â”œâ”€â”€ å¿«é€Ÿåˆ›å»ºusersè¡¨.md
â”‚   â”‚   â”œâ”€â”€ GitHubä»“åº“åˆ›å»ºè¯´æ˜.md
â”‚   â”‚   â””â”€â”€ å¿«é€Ÿåˆ›å»ºGitHubä»“åº“.md
â”‚   â”‚
â”‚   â””â”€â”€ database/                 # æ•°æ®åº“ç›¸å…³æ–‡æ¡£
â”‚       â”œâ”€â”€ SETUP_TEST_DB_README.md
â”‚       â”œâ”€â”€ SQLä½¿ç”¨è¯´æ˜.md
â”‚       â”œâ”€â”€ æ•°æ®åº“æ›´æ–°SQL.md
â”‚       â”œâ”€â”€ email_verificationsè¡¨è¯´æ˜.md
â”‚       â”œâ”€â”€ é‡å»ºç”¨æˆ·è¡¨è¯´æ˜.md
â”‚       â””â”€â”€ é‡å»ºtestæ•°æ®åº“usersè¡¨è¯´æ˜.md
â”‚
â”œâ”€â”€ tests/                        # å•å…ƒæµ‹è¯•ï¼ˆpytestï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py              # Pytest é…ç½®
â”‚   â”œâ”€â”€ test_api.py              # API æµ‹è¯•
â”‚   â”œâ”€â”€ test_database.py         # æ•°æ®åº“æµ‹è¯•
â”‚   â”œâ”€â”€ test_email_service.py    # é‚®ç®±æœåŠ¡æµ‹è¯•
â”‚   â”œâ”€â”€ test_frequency_limit.py  # é¢‘ç‡é™åˆ¶æµ‹è¯•
â”‚   â””â”€â”€ README.md                # æµ‹è¯•æ–‡æ¡£
â”‚
â”œâ”€â”€ templates/                    # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ about.html
â”‚
â”œâ”€â”€ sql/                          # SQL æ–‡ä»¶
â”‚   â”œâ”€â”€ create_tables.sql
â”‚   â”œâ”€â”€ create_users_table_only.sql
â”‚   â””â”€â”€ update_users_table_add_role.sql
â”‚
â”œâ”€â”€ frontend/                     # å‰ç«¯ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ frontend-example.ts
â”‚   â””â”€â”€ å‰ç«¯APIè°ƒç”¨ç¤ºä¾‹.ts
â”‚
â”œâ”€â”€ app.py                        # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ requirements.txt              # Python ä¾èµ–åŒ…
â”œâ”€â”€ env.example                   # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ run_tests.py                  # è¿è¡Œæµ‹è¯•è„šæœ¬
â”œâ”€â”€ start.bat                     # Windows å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start.ps1                     # PowerShell å¯åŠ¨è„šæœ¬
â”œâ”€â”€ README.md                     # é¡¹ç›®ä¸»æ–‡æ¡£
â””â”€â”€ .gitignore                    # Git å¿½ç•¥é…ç½®
```

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæ–‡ä»¶

- **app.py** (æ ¹ç›®å½•): åº”ç”¨å…¥å£æ–‡ä»¶ï¼Œå¯¼å…¥ `src.app` å¹¶å¯åŠ¨æœåŠ¡
- **src/app.py**: Flask åº”ç”¨ä¸»æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰è·¯ç”±å’Œä¸šåŠ¡é€»è¾‘
- **src/config.py**: é…ç½®ç®¡ç†ï¼ŒåŒ…å«æ•°æ®åº“ã€é‚®ç®±ã€CORS ç­‰é…ç½®
- **src/models.py**: æ•°æ®æ¨¡å‹å®šä¹‰ï¼ˆUserã€EmailVerificationï¼‰
- **src/email_service.py**: é‚®ç®±æœåŠ¡ï¼Œè´Ÿè´£å‘é€éªŒè¯ç ç­‰

### è„šæœ¬æ–‡ä»¶

- **scripts/database/**: æ•°æ®åº“ç›¸å…³è„šæœ¬ï¼Œç”¨äºåˆå§‹åŒ–ã€è¿ç§»ç­‰
- **scripts/test/**: åŠŸèƒ½æµ‹è¯•è„šæœ¬ï¼Œç”¨äºæ‰‹åŠ¨æµ‹è¯•API
- **scripts/utils/**: å·¥å…·è„šæœ¬ï¼Œç”¨äºæŸ¥è¯¢ã€æ£€æŸ¥ç­‰

### æ–‡æ¡£

- **docs/api/**: API æ¥å£æ–‡æ¡£å’Œå‰ç«¯å¯¹æ¥æ–‡æ¡£
- **docs/setup/**: é…ç½®è¯´æ˜æ–‡æ¡£
- **docs/guides/**: ä½¿ç”¨æŒ‡å—å’Œå¿«é€Ÿå¼€å§‹æ–‡æ¡£
- **docs/database/**: æ•°æ®åº“ç›¸å…³æ–‡æ¡£

## ğŸ”§ ä½¿ç”¨è¯´æ˜

### å¯åŠ¨åº”ç”¨

```bash
python app.py
```

æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š

```bash
# Windows
start.bat

# PowerShell
.\start.ps1
```

### è¿è¡Œæµ‹è¯•

```bash
# pytest å•å…ƒæµ‹è¯•
pytest

# æˆ–ä½¿ç”¨è„šæœ¬
python run_tests.py
```

### æ•°æ®åº“åˆå§‹åŒ–

```bash
python scripts/database/init_db.py
```

## ğŸ“š å¯¼å…¥è·¯å¾„

æ‰€æœ‰æ¨¡å—å¯¼å…¥éƒ½ä½¿ç”¨ `src.` å‰ç¼€ï¼š

```python
from src.app import app
from src.config import Config
from src.models import db, User
from src.email_service import send_verification_code
```

