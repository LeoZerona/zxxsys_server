# é¢˜ç›®æŸ¥è¯¢æ¥å£å‰ç«¯å¯¹æ¥æ–‡æ¡£

æœ¬æ–‡æ¡£æä¾›é¢˜ç›®æŸ¥è¯¢ç›¸å…³æ¥å£çš„å‰ç«¯å¯¹æ¥è¯´æ˜ï¼ŒåŒ…æ‹¬æ¥å£åœ°å€ã€è¯·æ±‚å‚æ•°ã€å“åº”æ ¼å¼å’Œå‰ç«¯è°ƒç”¨ç¤ºä¾‹ã€‚

## ğŸ“‹ ç›®å½•

1. [è·å–é¢˜ç›®åˆ—è¡¨](#1-è·å–é¢˜ç›®åˆ—è¡¨)
2. [è·å–å•ä¸ªé¢˜ç›®è¯¦æƒ…](#2-è·å–å•ä¸ªé¢˜ç›®è¯¦æƒ…)
3. [æ‰¹é‡è·å–é¢˜ç›®](#3-æ‰¹é‡è·å–é¢˜ç›®)
4. [è·å–é¢˜ç›®ç»Ÿè®¡ä¿¡æ¯](#4-è·å–é¢˜ç›®ç»Ÿè®¡ä¿¡æ¯)
5. [é¢˜å‹è¯´æ˜](#é¢˜å‹è¯´æ˜)
6. [é”™è¯¯å¤„ç†](#é”™è¯¯å¤„ç†)
7. [ä½¿ç”¨å»ºè®®](#ä½¿ç”¨å»ºè®®)

---

## 1. è·å–é¢˜ç›®åˆ—è¡¨

**æ¥å£åœ°å€**: `GET /api/questions`

**åŠŸèƒ½æè¿°**: æŒ‰é¢˜å‹ã€æ¸ é“ã€ç§‘ç›®ç­‰æ¡ä»¶åˆ†é¡µæŸ¥è¯¢é¢˜ç›®åˆ—è¡¨ï¼Œè¿”å›èšåˆåçš„é¢˜ç›®+ç­”æ¡ˆ+é€‰é¡¹æ•°æ®

### è¯·æ±‚å‚æ•°

| å‚æ•°å           | ç±»å‹    | å¿…å¡« | è¯´æ˜                                                       |
| ---------------- | ------- | ---- | ---------------------------------------------------------- |
| type             | string  | æ˜¯   | é¢˜å‹ï¼š`1`=å•é€‰, `2`=å¤šé€‰, `3`=åˆ¤æ–­, `4`=å¡«ç©º, `8`=è®¡ç®—åˆ†æ |
| channel_code     | string  | å¦   | æ¸ é“ä»£ç ï¼Œé»˜è®¤æŸ¥è¯¢æ‰€æœ‰æ¸ é“                                 |
| subject_id       | int     | å¦   | ç§‘ç›® ID                                                    |
| subject_name     | string  | å¦   | ç§‘ç›®åç§°                                                   |
| chapter_id       | int     | å¦   | ç« èŠ‚ ID                                                    |
| attr             | string  | å¦   | é¢˜ç›®å±æ€§                                                   |
| page             | int     | å¦   | é¡µç ï¼Œé»˜è®¤ 1                                               |
| page_size        | int     | å¦   | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20ï¼Œæœ€å¤§ 100                                |
| include_answer   | boolean | å¦   | æ˜¯å¦åŒ…å«ç­”æ¡ˆï¼Œé»˜è®¤ true                                    |
| include_analysis | boolean | å¦   | æ˜¯å¦åŒ…å«è§£æï¼Œé»˜è®¤ true                                    |

### è¯·æ±‚ç¤ºä¾‹

```bash
GET /api/questions?type=1&channel_code=default&page=1&page_size=20&include_answer=true&include_analysis=true
```

### æˆåŠŸå“åº” (200)

```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "list": [
      {
        "question_id": 12345,
        "type": "1",
        "type_name": "å•é€‰é¢˜",
        "subject_id": 1,
        "subject_name": "ä¼šè®¡å­¦",
        "chapter_id": 10,
        "content": "é¢˜ç›®å†…å®¹...",
        "analysis": "é¢˜ç›®è§£æ...",
        "answer": {
          "correct_answer": "A",
          "option_true": "A"
        },
        "options": [
          {
            "label": "A",
            "content": "é€‰é¡¹Aå†…å®¹",
            "seq": 1
          },
          {
            "label": "B",
            "content": "é€‰é¡¹Bå†…å®¹",
            "seq": 2
          }
        ]
      }
    ],
    "pagination": {
      "page": 1,
      "page_size": 20,
      "total": 49226,
      "total_pages": 2462
    }
  }
}
```

### é”™è¯¯å“åº”

- å‚æ•°é”™è¯¯ (400):

```json
{
  "success": false,
  "message": "é¢˜å‹å‚æ•°ä¸èƒ½ä¸ºç©º",
  "error_code": "INVALID_PARAMETER",
  "details": {
    "field": "type",
    "reason": "é¢˜å‹å‚æ•°æ˜¯å¿…å¡«çš„"
  }
}
```

### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

**TypeScript/Axios**:

```typescript
interface QuestionListParams {
  type: string;
  channel_code?: string;
  subject_id?: number;
  subject_name?: string;
  chapter_id?: number;
  attr?: string;
  page?: number;
  page_size?: number;
  include_answer?: boolean;
  include_analysis?: boolean;
}

interface QuestionListResponse {
  success: boolean;
  message: string;
  data: {
    list: Question[];
    pagination: {
      page: number;
      page_size: number;
      total: number;
      total_pages: number;
    };
  };
}

async function getQuestionList(
  params: QuestionListParams
): Promise<QuestionListResponse> {
  try {
    const response = await axios.get<QuestionListResponse>("/api/questions", {
      params: params,
    });
    return response.data;
  } catch (error: any) {
    if (error.response) {
      throw new Error(error.response.data.message || "è·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥");
    }
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const result = await getQuestionList({
  type: "1",
  channel_code: "default",
  page: 1,
  page_size: 20,
});

console.log("é¢˜ç›®åˆ—è¡¨:", result.data.list);
console.log("åˆ†é¡µä¿¡æ¯:", result.data.pagination);
```

**JavaScript/Fetch**:

```javascript
async function getQuestionList(params) {
  const queryString = new URLSearchParams(
    Object.entries(params).reduce((acc, [key, value]) => {
      if (value !== undefined && value !== null) {
        acc[key] = value;
      }
      return acc;
    }, {})
  ).toString();

  try {
    const url = `/api/questions${queryString ? `?${queryString}` : ""}`;
    const response = await fetch(url);
    const data = await response.json();

    if (!data.success) {
      throw new Error(data.message || "è·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥");
    }

    return data;
  } catch (error) {
    console.error("è·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥:", error);
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
getQuestionList({
  type: "1",
  page: 1,
  page_size: 20,
}).then((result) => {
  console.log("é¢˜ç›®åˆ—è¡¨:", result.data.list);
  console.log("æ€»æ•°:", result.data.pagination.total);
});
```

---

## 2. è·å–å•ä¸ªé¢˜ç›®è¯¦æƒ…

**æ¥å£åœ°å€**: `GET /api/questions/<question_id>`

**åŠŸèƒ½æè¿°**: æ ¹æ®é¢˜ç›® ID è·å–å®Œæ•´çš„é¢˜ç›®ä¿¡æ¯ï¼ˆåŒ…æ‹¬é¢˜å¹²ã€ç­”æ¡ˆã€é€‰é¡¹ã€è§£æç­‰ï¼‰

### è¯·æ±‚å‚æ•°

| å‚æ•°å           | ç±»å‹    | å¿…å¡« | è¯´æ˜                    |
| ---------------- | ------- | ---- | ----------------------- |
| question_id      | int     | æ˜¯   | é¢˜ç›® IDï¼ˆè·¯å¾„å‚æ•°ï¼‰     |
| include_answer   | boolean | å¦   | æ˜¯å¦åŒ…å«ç­”æ¡ˆï¼Œé»˜è®¤ true |
| include_analysis | boolean | å¦   | æ˜¯å¦åŒ…å«è§£æï¼Œé»˜è®¤ true |

### è¯·æ±‚ç¤ºä¾‹

```bash
GET /api/questions/12345?include_answer=true&include_analysis=true
```

### æˆåŠŸå“åº” (200)

```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "question_id": 12345,
    "type": "1",
    "type_name": "å•é€‰é¢˜",
    "content": "é¢˜ç›®å†…å®¹...",
    "analysis": "é¢˜ç›®è§£æ...",
    "answer": {
      "correct_answer": "A",
      "option_true": "A"
    },
    "options": [
      {
        "label": "A",
        "content": "é€‰é¡¹Aå†…å®¹",
        "seq": 1
      },
      {
        "label": "B",
        "content": "é€‰é¡¹Bå†…å®¹",
        "seq": 2
      }
    ]
  }
}
```

### é”™è¯¯å“åº”

- é¢˜ç›®ä¸å­˜åœ¨ (404):

```json
{
  "success": false,
  "message": "é¢˜ç›®ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤",
  "error_code": "NOT_FOUND"
}
```

### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

**TypeScript/Axios**:

```typescript
interface QuestionDetailParams {
  include_answer?: boolean;
  include_analysis?: boolean;
}

interface QuestionDetailResponse {
  success: boolean;
  message: string;
  data: Question;
}

async function getQuestionDetail(
  questionId: number,
  params?: QuestionDetailParams
): Promise<QuestionDetailResponse> {
  try {
    const response = await axios.get<QuestionDetailResponse>(
      `/api/questions/${questionId}`,
      {
        params: params,
      }
    );
    return response.data;
  } catch (error: any) {
    if (error.response) {
      if (error.response.status === 404) {
        throw new Error("é¢˜ç›®ä¸å­˜åœ¨");
      }
      throw new Error(error.response.data.message || "è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥");
    }
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const question = await getQuestionDetail(12345, {
  include_answer: true,
  include_analysis: true,
});
console.log("é¢˜ç›®è¯¦æƒ…:", question.data);
```

**JavaScript/Fetch**:

```javascript
async function getQuestionDetail(questionId, params = {}) {
  const queryString = new URLSearchParams(
    Object.entries(params).reduce((acc, [key, value]) => {
      if (value !== undefined && value !== null) {
        acc[key] = value;
      }
      return acc;
    }, {})
  ).toString();

  try {
    const url = `/api/questions/${questionId}${
      queryString ? `?${queryString}` : ""
    }`;
    const response = await fetch(url);
    const data = await response.json();

    if (!data.success) {
      throw new Error(data.message || "è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥");
    }

    return data;
  } catch (error) {
    console.error("è·å–é¢˜ç›®è¯¦æƒ…å¤±è´¥:", error);
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
getQuestionDetail(12345, {
  include_answer: true,
  include_analysis: true,
}).then((result) => {
  console.log("é¢˜ç›®è¯¦æƒ…:", result.data);
});
```

---

## 3. æ‰¹é‡è·å–é¢˜ç›®

**æ¥å£åœ°å€**: `POST /api/questions/batch`

**åŠŸèƒ½æè¿°**: æ ¹æ®é¢˜ç›® ID åˆ—è¡¨æ‰¹é‡è·å–é¢˜ç›®è¯¦æƒ…

### è¯·æ±‚å‚æ•°

| å‚æ•°å           | ç±»å‹       | å¿…å¡« | è¯´æ˜                      |
| ---------------- | ---------- | ---- | ------------------------- |
| question_ids     | array[int] | æ˜¯   | é¢˜ç›® ID æ•°ç»„ï¼Œæœ€å¤š 100 ä¸ª |
| include_answer   | boolean    | å¦   | æ˜¯å¦åŒ…å«ç­”æ¡ˆï¼Œé»˜è®¤ true   |
| include_analysis | boolean    | å¦   | æ˜¯å¦åŒ…å«è§£æï¼Œé»˜è®¤ true   |

#### è¯·æ±‚ç¤ºä¾‹

```bash
POST /api/questions/batch
Content-Type: application/json

{
  "question_ids": [12345, 12346, 12347],
  "include_answer": true,
  "include_analysis": true
}
```

#### æˆåŠŸå“åº” (200)

```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "questions": [
      {
        "question_id": 12345,
        "type": "1",
        "type_name": "å•é€‰é¢˜",
        "content": "é¢˜ç›®å†…å®¹...",
        "answer": {
          "correct_answer": "A",
          "option_true": "A"
        },
        "options": [
          {
            "label": "A",
            "content": "é€‰é¡¹Aå†…å®¹",
            "seq": 1
          }
        ]
      }
    ],
    "not_found_ids": [12350]
  }
}
```

**è¯´æ˜**:

- `questions`: æˆåŠŸè·å–çš„é¢˜ç›®åˆ—è¡¨
- `not_found_ids`: æœªæ‰¾åˆ°çš„é¢˜ç›® ID åˆ—è¡¨ï¼ˆé¢˜ç›®ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ï¼‰

#### é”™è¯¯å“åº”

- å‚æ•°é”™è¯¯ (400):

```json
{
  "success": false,
  "message": "é¢˜ç›®IDåˆ—è¡¨ä¸èƒ½ä¸ºç©ºï¼Œä¸”æœ€å¤š100ä¸ª",
  "error_code": "INVALID_PARAMETER",
  "details": {
    "field": "question_ids",
    "reason": "é¢˜ç›®IDåˆ—è¡¨ä¸èƒ½ä¸ºç©ºï¼Œä¸”æœ€å¤š100ä¸ª"
  }
}
```

#### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

**TypeScript/Axios**:

```typescript
interface BatchQuestionParams {
  question_ids: number[];
  include_answer?: boolean;
  include_analysis?: boolean;
}

interface BatchQuestionResponse {
  success: boolean;
  message: string;
  data: {
    questions: Question[];
    not_found_ids: number[];
  };
}

async function batchGetQuestions(
  params: BatchQuestionParams
): Promise<BatchQuestionResponse> {
  try {
    const response = await axios.post<BatchQuestionResponse>(
      "/api/questions/batch",
      params
    );
    return response.data;
  } catch (error: any) {
    if (error.response) {
      throw new Error(error.response.data.message || "æ‰¹é‡è·å–é¢˜ç›®å¤±è´¥");
    }
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const result = await batchGetQuestions({
  question_ids: [12345, 12346, 12347],
  include_answer: true,
  include_analysis: true,
});

console.log("é¢˜ç›®åˆ—è¡¨:", result.data.questions);
console.log("æœªæ‰¾åˆ°çš„ID:", result.data.not_found_ids);
```

**JavaScript/Fetch**:

```javascript
async function batchGetQuestions(params) {
  try {
    const response = await fetch("/api/questions/batch", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        question_ids: params.question_ids,
        include_answer: params.include_answer !== false,
        include_analysis: params.include_analysis !== false,
      }),
    });

    const data = await response.json();

    if (!data.success) {
      throw new Error(data.message || "æ‰¹é‡è·å–é¢˜ç›®å¤±è´¥");
    }

    return data;
  } catch (error) {
    console.error("æ‰¹é‡è·å–é¢˜ç›®å¤±è´¥:", error);
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
batchGetQuestions({
  question_ids: [12345, 12346, 12347],
}).then((result) => {
  console.log("é¢˜ç›®åˆ—è¡¨:", result.data.questions);
  if (result.data.not_found_ids.length > 0) {
    console.warn("æœªæ‰¾åˆ°çš„é¢˜ç›®ID:", result.data.not_found_ids);
  }
});
```

---

### 4. è·å–é¢˜ç›®ç»Ÿè®¡ä¿¡æ¯

**æ¥å£åœ°å€**: `GET /api/questions/statistics`

**åŠŸèƒ½æè¿°**: è·å–é¢˜ç›®ç»Ÿè®¡ä¿¡æ¯ï¼Œæ”¯æŒæŒ‰é¢˜å‹ã€ç§‘ç›®ã€æ¸ é“åˆ†ç»„ç»Ÿè®¡

#### è¯·æ±‚å‚æ•°

| å‚æ•°å       | ç±»å‹   | å¿…å¡« | è¯´æ˜                                                        |
| ------------ | ------ | ---- | ----------------------------------------------------------- |
| channel_code | string | å¦   | æ¸ é“ä»£ç ï¼Œä¸ä¼ åˆ™ç»Ÿè®¡æ‰€æœ‰æ¸ é“                                |
| group_by     | string | å¦   | åˆ†ç»„æ–¹å¼ï¼š`type`=æŒ‰é¢˜å‹, `subject`=æŒ‰ç§‘ç›®, `channel`=æŒ‰æ¸ é“ |

#### è¯·æ±‚ç¤ºä¾‹

```bash
GET /api/questions/statistics?group_by=type&channel_code=default
```

#### æˆåŠŸå“åº” (200)

**æŒ‰é¢˜å‹ç»Ÿè®¡** (`group_by=type`):

```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "total": 91149,
    "statistics": [
      {
        "type": "1",
        "type_name": "å•é€‰é¢˜",
        "count": 49226
      },
      {
        "type": "2",
        "type_name": "å¤šé€‰é¢˜",
        "count": 11134
      },
      {
        "type": "3",
        "type_name": "åˆ¤æ–­é¢˜",
        "count": 2059
      },
      {
        "type": "4",
        "type_name": "å¡«ç©ºé¢˜",
        "count": 17671
      },
      {
        "type": "8",
        "type_name": "è®¡ç®—åˆ†æé¢˜",
        "count": 1059
      }
    ]
  }
}
```

**æŒ‰ç§‘ç›®ç»Ÿè®¡** (`group_by=subject`):

```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "total": 91149,
    "statistics": [
      {
        "subject_id": 1,
        "subject_name": "ä¼šè®¡å­¦",
        "count": 45000
      },
      {
        "subject_id": 2,
        "subject_name": "è´¢åŠ¡ç®¡ç†",
        "count": 46149
      }
    ]
  }
}
```

**æŒ‰æ¸ é“ç»Ÿè®¡** (`group_by=channel`):

```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "total": 91149,
    "statistics": [
      {
        "channel_code": "default",
        "count": 80000
      },
      {
        "channel_code": "channel1",
        "count": 11149
      }
    ]
  }
}
```

**ä¸åˆ†ç»„** (ä¸ä¼  `group_by`):

```json
{
  "success": true,
  "message": "è·å–æˆåŠŸ",
  "data": {
    "total": 91149
  }
}
```

#### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

**TypeScript/Axios**:

```typescript
interface StatisticsParams {
  channel_code?: string;
  group_by?: "type" | "subject" | "channel";
}

interface StatisticsResponse {
  success: boolean;
  message: string;
  data: {
    total: number;
    statistics?: Array<{
      type?: string;
      type_name?: string;
      subject_id?: number;
      subject_name?: string;
      channel_code?: string;
      count: number;
    }>;
  };
}

async function getQuestionStatistics(
  params?: StatisticsParams
): Promise<StatisticsResponse> {
  try {
    const response = await axios.get<StatisticsResponse>(
      "/api/questions/statistics",
      {
        params: params,
      }
    );
    return response.data;
  } catch (error: any) {
    if (error.response) {
      throw new Error(error.response.data.message || "è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥");
    }
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹ - æŒ‰é¢˜å‹ç»Ÿè®¡
const typeStats = await getQuestionStatistics({
  group_by: "type",
  channel_code: "default",
});
console.log("é¢˜å‹ç»Ÿè®¡:", typeStats.data.statistics);

// ä½¿ç”¨ç¤ºä¾‹ - æŒ‰ç§‘ç›®ç»Ÿè®¡
const subjectStats = await getQuestionStatistics({
  group_by: "subject",
});
console.log("ç§‘ç›®ç»Ÿè®¡:", subjectStats.data.statistics);
```

**JavaScript/Fetch**:

```javascript
async function getQuestionStatistics(params = {}) {
  const queryString = new URLSearchParams(
    Object.entries(params).reduce((acc, [key, value]) => {
      if (value !== undefined && value !== null) {
        acc[key] = value;
      }
      return acc;
    }, {})
  ).toString();

  try {
    const url = `/api/questions/statistics${
      queryString ? `?${queryString}` : ""
    }`;
    const response = await fetch(url);
    const data = await response.json();

    if (!data.success) {
      throw new Error(data.message || "è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥");
    }

    return data;
  } catch (error) {
    console.error("è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:", error);
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
getQuestionStatistics({ group_by: "type" }).then((result) => {
  console.log("æ€»æ•°:", result.data.total);
  console.log("ç»Ÿè®¡ä¿¡æ¯:", result.data.statistics);
});
```

---

## ğŸ“ é¢˜å‹è¯´æ˜

### é¢˜å‹ä»£ç å¯¹ç…§è¡¨

| é¢˜å‹ä»£ç  | é¢˜å‹åç§°   | è¯´æ˜                     |
| -------- | ---------- | ------------------------ |
| 1        | å•é€‰é¢˜     | åªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆ         |
| 2        | å¤šé€‰é¢˜     | æœ‰å¤šä¸ªæ­£ç¡®ç­”æ¡ˆ           |
| 3        | åˆ¤æ–­é¢˜     | æ­£ç¡®æˆ–é”™è¯¯               |
| 4        | å¡«ç©ºé¢˜     | å¡«å†™ç­”æ¡ˆ                 |
| 8        | è®¡ç®—åˆ†æé¢˜ | åŒ…å«å¤šä¸ªå­é¢˜çš„ç»¼åˆæ€§é¢˜ç›® |

### ä¸åŒé¢˜å‹çš„å“åº”ç»“æ„

#### å•é€‰é¢˜ (type=1)

```json
{
  "question_id": 12345,
  "type": "1",
  "type_name": "å•é€‰é¢˜",
  "content": "é¢˜ç›®å†…å®¹...",
  "answer": {
    "correct_answer": "A", // å•ä¸ªé€‰é¡¹æ ‡ç­¾
    "option_true": "A"
  },
  "options": [
    { "label": "A", "content": "é€‰é¡¹A", "seq": 1 },
    { "label": "B", "content": "é€‰é¡¹B", "seq": 2 }
  ]
}
```

#### å¤šé€‰é¢˜ (type=2)

```json
{
  "question_id": 12346,
  "type": "2",
  "type_name": "å¤šé€‰é¢˜",
  "content": "é¢˜ç›®å†…å®¹...",
  "answer": {
    "correct_answer": ["A", "B"], // é€‰é¡¹æ ‡ç­¾æ•°ç»„
    "option_true": "A,B"
  },
  "options": [
    { "label": "A", "content": "é€‰é¡¹A", "seq": 1 },
    { "label": "B", "content": "é€‰é¡¹B", "seq": 2 }
  ]
}
```

#### åˆ¤æ–­é¢˜ (type=3)

```json
{
  "question_id": 12347,
  "type": "3",
  "type_name": "åˆ¤æ–­é¢˜",
  "content": "é¢˜ç›®å†…å®¹...",
  "answer": {
    "correct_answer": "1", // 1=æ­£ç¡®, 2=é”™è¯¯
    "option_true": "1"
  },
  "options": [] // åˆ¤æ–­é¢˜æ— é€‰é¡¹
}
```

#### å¡«ç©ºé¢˜ (type=4)

```json
{
  "question_id": 12348,
  "type": "4",
  "type_name": "å¡«ç©ºé¢˜",
  "content": "é¢˜ç›®å†…å®¹...",
  "answer": {
    "correct_answer": "ç­”æ¡ˆæ–‡æœ¬å†…å®¹",
    "answer_content": "ç­”æ¡ˆæ–‡æœ¬å†…å®¹"
  },
  "options": [] // å¡«ç©ºé¢˜æ— é€‰é¡¹
}
```

#### è®¡ç®—åˆ†æé¢˜ (type=8)

```json
{
  "question_id": 12349,
  "type": "8",
  "type_name": "è®¡ç®—åˆ†æé¢˜",
  "content": "å¤§é¢˜é¢˜ç›®å†…å®¹...",
  "answer": {
    "type2": "1", // 1=åˆ†å½•é¢˜, 2=å¡«ç©ºé¢˜
    "sub_questions": [
      {
        "calcchild_id": 1,
        "type": "3", // 1=åˆ†å½•é¢˜, 2=å¡«ç©ºé¢˜, 3=ä¸å®šé¡¹é€‰æ‹©
        "content": "å­é¢˜1å†…å®¹...",
        "answer": {
          "answer_content": "ç­”æ¡ˆå†…å®¹",
          "option_true": "A,B"
        },
        "options": [{ "label": "A", "content": "é€‰é¡¹A", "seq": 1 }],
        "analysis": "è§£æå†…å®¹",
        "sort": 1
      }
    ]
  },
  "options": [] // å¤§é¢˜æœ¬èº«æ— é€‰é¡¹
}
```

---

## âš ï¸ é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç 

| HTTP çŠ¶æ€ç  | é”™è¯¯ç             | è¯´æ˜           |
| ----------- | ----------------- | -------------- |
| 200         | SUCCESS           | è¯·æ±‚æˆåŠŸ       |
| 400         | INVALID_PARAMETER | å‚æ•°é”™è¯¯       |
| 404         | NOT_FOUND         | èµ„æºä¸å­˜åœ¨     |
| 500         | INTERNAL_ERROR    | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### é”™è¯¯å¤„ç†ç¤ºä¾‹

**TypeScript**:

```typescript
async function handleApiCall<T>(apiCall: () => Promise<T>): Promise<T> {
  try {
    return await apiCall();
  } catch (error: any) {
    if (error.response) {
      const { status, data } = error.response;

      switch (status) {
        case 400:
          console.error("å‚æ•°é”™è¯¯:", data.message);
          // æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
          break;
        case 404:
          console.error("èµ„æºä¸å­˜åœ¨:", data.message);
          // æ˜¾ç¤º"æœªæ‰¾åˆ°"æç¤º
          break;
        case 500:
          console.error("æœåŠ¡å™¨é”™è¯¯:", data.message);
          // æ˜¾ç¤º"æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"
          break;
        default:
          console.error("æœªçŸ¥é”™è¯¯:", data.message);
      }
    } else {
      console.error("ç½‘ç»œé”™è¯¯:", error.message);
    }
    throw error;
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const result = await handleApiCall(() =>
  getQuestionList({ type: "1", page: 1 })
);
```

**JavaScript**:

```javascript
async function handleApiCall(apiCall) {
  try {
    return await apiCall();
  } catch (error) {
    if (error.response) {
      const { status, data } = error.response;

      switch (status) {
        case 400:
          alert(`å‚æ•°é”™è¯¯: ${data.message}`);
          break;
        case 404:
          alert(`èµ„æºä¸å­˜åœ¨: ${data.message}`);
          break;
        case 500:
          alert(`æœåŠ¡å™¨é”™è¯¯: ${data.message}`);
          break;
        default:
          alert(`é”™è¯¯: ${data.message}`);
      }
    } else {
      alert(`ç½‘ç»œé”™è¯¯: ${error.message}`);
    }
    throw error;
  }
}
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. åˆ†é¡µåŠ è½½

å¯¹äºå¤§é‡é¢˜ç›®ï¼Œå»ºè®®ä½¿ç”¨åˆ†é¡µåŠ è½½ï¼š

```typescript
// åˆ†é¡µåŠ è½½é¢˜ç›®
async function loadQuestionsByPage(
  type: string,
  page: number = 1,
  pageSize: number = 20
) {
  const result = await getQuestionList({
    type,
    page,
    page_size: pageSize,
  });

  return {
    questions: result.data.list,
    hasMore: result.data.pagination.page < result.data.pagination.total_pages,
    total: result.data.pagination.total,
  };
}
```

### 2. æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–

å½“éœ€è¦è·å–å¤šä¸ªé¢˜ç›®æ—¶ï¼Œä½¿ç”¨æ‰¹é‡æŸ¥è¯¢æ¥å£è€Œä¸æ˜¯å¤šæ¬¡è°ƒç”¨å•ä¸ªæŸ¥è¯¢ï¼š

```typescript
// âŒ ä¸æ¨èï¼šå¤šæ¬¡å•ä¸ªæŸ¥è¯¢
const question1 = await getQuestionDetail(12345);
const question2 = await getQuestionDetail(12346);
const question3 = await getQuestionDetail(12347);
// éœ€è¦3æ¬¡ç½‘ç»œè¯·æ±‚ï¼Œæ•ˆç‡ä½

// âœ… æ¨èï¼šä½¿ç”¨æ‰¹é‡æŸ¥è¯¢æ¥å£
const result = await batchGetQuestions({
  question_ids: [12345, 12346, 12347],
  include_answer: true,
  include_analysis: true,
});
// åªéœ€1æ¬¡ç½‘ç»œè¯·æ±‚ï¼Œæ•ˆç‡é«˜
console.log("é¢˜ç›®åˆ—è¡¨:", result.data.questions);
if (result.data.not_found_ids.length > 0) {
  console.warn("æœªæ‰¾åˆ°çš„é¢˜ç›®ID:", result.data.not_found_ids);
}
```

**ä¼˜åŠ¿**:

- å‡å°‘ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½
- é™ä½æœåŠ¡å™¨è´Ÿè½½
- æ›´å¥½çš„é”™è¯¯å¤„ç†ï¼ˆå¯ä»¥çŸ¥é“å“ªäº›é¢˜ç›®æœªæ‰¾åˆ°ï¼‰
