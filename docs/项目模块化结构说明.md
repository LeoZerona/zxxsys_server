# é¡¹ç›®æ¨¡å—åŒ–ç»“æ„è¯´æ˜

## ğŸ“ é¡¹ç›®ç»“æ„

é¡¹ç›®å·²æŒ‰åŠŸèƒ½æ¨¡å—è¿›è¡Œæ‹†åˆ†ï¼Œä¾¿äºåç»­æ‰©å±•å’Œç»´æŠ¤ã€‚

```
src/
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py     # ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰æ¨¡å‹
â”‚   â”œâ”€â”€ user.py         # ç”¨æˆ·æ¨¡å‹
â”‚   â””â”€â”€ email_verification.py  # é‚®ç®±éªŒè¯ç æ¨¡å‹
â”œâ”€â”€ services/            # æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ email_service.py  # é‚®ç®±æœåŠ¡ï¼ˆå‘é€éªŒè¯ç ã€éªŒè¯éªŒè¯ç ç­‰ï¼‰
â”œâ”€â”€ routes/              # è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ auth.py         # è®¤è¯ç›¸å…³è·¯ç”±ï¼ˆæ³¨å†Œã€ç™»å½•ç­‰ï¼‰
â”‚   â”œâ”€â”€ email.py        # é‚®ç®±ç›¸å…³è·¯ç”±ï¼ˆå‘é€éªŒè¯ç ã€éªŒè¯éªŒè¯ç ï¼‰
â”‚   â””â”€â”€ user.py         # ç”¨æˆ·ç›¸å…³è·¯ç”±ï¼ˆè·å–ç”¨æˆ·ä¿¡æ¯ç­‰ï¼‰
â”œâ”€â”€ app.py              # Flask åº”ç”¨å…¥å£å’Œé…ç½®
â””â”€â”€ config.py           # é…ç½®æ–‡ä»¶
```

## ğŸ“¦ æ¨¡å—è¯´æ˜

### 1. Models æ¨¡å— (`src/models/`)

**èŒè´£**: å®šä¹‰æ•°æ®åº“æ¨¡å‹å’Œæ•°æ®è®¿é—®å±‚

- **`user.py`**: ç”¨æˆ·æ•°æ®æ¨¡å‹
  - `User` ç±»ï¼šç”¨æˆ·ä¿¡æ¯ã€å¯†ç åŠ å¯†ã€æƒé™æ£€æŸ¥ç­‰
  
- **`email_verification.py`**: é‚®ç®±éªŒè¯ç æ•°æ®æ¨¡å‹
  - `EmailVerification` ç±»ï¼šéªŒè¯ç å­˜å‚¨å’ŒéªŒè¯

- **`__init__.py`**: ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰æ¨¡å‹ï¼Œæ–¹ä¾¿å¯¼å…¥
  ```python
  from src.models import db, User, EmailVerification
  ```

### 2. Services æ¨¡å— (`src/services/`)

**èŒè´£**: ä¸šåŠ¡é€»è¾‘å±‚ï¼Œå¤„ç†æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½

- **`email_service.py`**: é‚®ç®±æœåŠ¡
  - `init_mail()`: åˆå§‹åŒ–é‚®ç®±é…ç½®
  - `send_verification_code()`: å‘é€éªŒè¯ç 
  - `verify_code()`: éªŒè¯éªŒè¯ç 
  - `generate_verification_code()`: ç”ŸæˆéªŒè¯ç 

### 3. Routes æ¨¡å— (`src/routes/`)

**èŒè´£**: å®šä¹‰ API è·¯ç”±å’Œå¤„ç† HTTP è¯·æ±‚

- **`auth.py`**: è®¤è¯ç›¸å…³è·¯ç”±
  - `register_route(app)`: æ³¨å†Œè®¤è¯è·¯ç”±
  - `/api/register` - ç”¨æˆ·æ³¨å†Œæ¥å£

- **`email.py`**: é‚®ç®±ç›¸å…³è·¯ç”±
  - `register_email_routes(app)`: æ³¨å†Œé‚®ç®±è·¯ç”±
  - `/api/send-verification-code` - å‘é€éªŒè¯ç 
  - `/api/verify-code` - éªŒè¯éªŒè¯ç 

- **`user.py`**: ç”¨æˆ·ç›¸å…³è·¯ç”±
  - `register_user_routes(app)`: æ³¨å†Œç”¨æˆ·è·¯ç”±
  - `/api/users/<id>` - è·å–ç”¨æˆ·ä¿¡æ¯

## ğŸ”„ æ·»åŠ æ–°æ¨¡å—çš„æ­¥éª¤

### æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹

1. åœ¨ `src/models/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ `article.py`
2. å®šä¹‰æ¨¡å‹ç±»
3. åœ¨ `src/models/__init__.py` ä¸­å¯¼å…¥å¹¶å¯¼å‡º
   ```python
   from src.models.article import Article
   __all__ = [..., 'Article']
   ```

### æ·»åŠ æ–°çš„æœåŠ¡

1. åœ¨ `src/services/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ `article_service.py`
2. å®ç°ä¸šåŠ¡é€»è¾‘å‡½æ•°
3. åœ¨éœ€è¦çš„åœ°æ–¹å¯¼å…¥ä½¿ç”¨
   ```python
   from src.services.article_service import create_article
   ```

### æ·»åŠ æ–°çš„è·¯ç”±

1. åœ¨ `src/routes/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œä¾‹å¦‚ `article.py`
2. å®šä¹‰è·¯ç”±æ³¨å†Œå‡½æ•°
   ```python
   def register_article_routes(app):
       @app.route('/api/articles', methods=['GET'])
       def get_articles():
           ...
   ```
3. åœ¨ `src/app.py` ä¸­æ³¨å†Œè·¯ç”±
   ```python
   from src.routes.article import register_article_routes
   register_article_routes(app)
   ```

## âœ… ä¼˜åŠ¿

1. **æ¸…æ™°çš„èŒè´£åˆ’åˆ†**: æ¯ä¸ªæ¨¡å—åªè´Ÿè´£è‡ªå·±çš„åŠŸèƒ½
2. **æ˜“äºæ‰©å±•**: æ–°å¢åŠŸèƒ½åªéœ€åœ¨å¯¹åº”æ¨¡å—æ·»åŠ æ–‡ä»¶
3. **ä¾¿äºç»´æŠ¤**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œå®¹æ˜“å®šä½é—®é¢˜
4. **å›¢é˜Ÿåä½œ**: ä¸åŒå¼€å‘è€…å¯ä»¥åŒæ—¶å¼€å‘ä¸åŒæ¨¡å—ï¼Œå‡å°‘å†²çª
5. **ä»£ç å¤ç”¨**: æœåŠ¡å±‚å¯ä»¥è¢«å¤šä¸ªè·¯ç”±å¤ç”¨

## ğŸ“ æ³¨æ„äº‹é¡¹

- æ‰€æœ‰å¯¼å…¥ç»Ÿä¸€ä½¿ç”¨ `from src.xxx import ...` æ ¼å¼
- æ¨¡å‹å¿…é¡»é€šè¿‡ `src/models/__init__.py` å¯¼å‡º
- è·¯ç”±æ³¨å†Œå‡½æ•°å‘½åç»Ÿä¸€ä¸º `register_xxx_routes(app)`
- æœåŠ¡å‡½æ•°åº”è¯¥æ˜¯æ— çŠ¶æ€çš„ï¼Œä¾¿äºæµ‹è¯•å’Œå¤ç”¨

