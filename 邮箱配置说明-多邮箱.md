# 多邮箱配置说明

## 📧 当前配置

**当前使用**：163 邮箱（axiolxk@163.com）

配置文件：`.env`

---

## 🔄 切换邮箱配置

### 方法：修改 `.env` 文件

1. **注释掉当前邮箱配置**（在配置行前加 `#`）
2. **取消要使用邮箱配置的注释**（删除配置行前的 `#`）
3. **填入正确的邮箱地址和授权码/密码**
4. **重启 Flask 应用**

---

## 📋 各邮箱服务商配置说明

### 1. 163 邮箱 ✅（当前使用）

```env
MAIL_SERVER=smtp.163.com
MAIL_PORT=465
MAIL_USE_TLS=false
MAIL_USE_SSL=true
MAIL_USERNAME=axiolxk@163.com
MAIL_PASSWORD=NHsesEypMyyfphNn
MAIL_DEFAULT_SENDER=axiolxk@163.com
```

**获取授权码**：
1. 登录 163 邮箱 → 设置 → POP3/SMTP/IMAP
2. 开启 SMTP 服务
3. 获取授权码

**限制**：
- 每天最多 500 封
- 每小时最多 100 封

---

### 2. 126 邮箱

```env
MAIL_SERVER=smtp.126.com
MAIL_PORT=465
MAIL_USE_TLS=false
MAIL_USE_SSL=true
MAIL_USERNAME=YOUR_EMAIL@126.com
MAIL_PASSWORD=YOUR_AUTHORIZATION_CODE
MAIL_DEFAULT_SENDER=YOUR_EMAIL@126.com
```

**获取授权码**：
1. 登录 126 邮箱 → 设置 → POP3/SMTP/IMAP
2. 开启 SMTP 服务
3. 获取授权码

**限制**：
- 每天最多 500 封
- 每小时最多 100 封

---

### 3. QQ 邮箱

```env
MAIL_SERVER=smtp.qq.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=YOUR_QQ_NUMBER@qq.com
MAIL_PASSWORD=YOUR_AUTHORIZATION_CODE
MAIL_DEFAULT_SENDER=YOUR_QQ_NUMBER@qq.com
```

**获取授权码**：
1. 登录 QQ 邮箱 → 设置 → 账户
2. POP3/SMTP服务 → 开启
3. 生成授权码

**限制**：
- 每天最多 500 封
- 每小时最多 100 封

**注意**：`MAIL_USERNAME` 使用 QQ 号码（不是邮箱地址），例如：`123456789@qq.com`

---

### 4. Gmail 邮箱

```env
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=YOUR_EMAIL@gmail.com
MAIL_PASSWORD=YOUR_APP_PASSWORD
MAIL_DEFAULT_SENDER=YOUR_EMAIL@gmail.com
```

**获取应用专用密码**：
1. 登录 Google 账号
2. 进入 [Google 账号安全设置](https://myaccount.google.com/security)
3. 启用"两步验证"
4. 生成"应用专用密码"
5. 使用应用专用密码作为 `MAIL_PASSWORD`

**限制**：
- 每天最多 500 封（免费账号）
- **必须开启两步验证才能使用**

**备用端口**（如果 587 端口被阻止）：
```env
MAIL_PORT=465
MAIL_USE_TLS=false
MAIL_USE_SSL=true
```

---

### 5. Outlook/Hotmail 邮箱

```env
MAIL_SERVER=smtp-mail.outlook.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=YOUR_EMAIL@outlook.com
MAIL_PASSWORD=YOUR_APP_PASSWORD
MAIL_DEFAULT_SENDER=YOUR_EMAIL@outlook.com
```

**获取应用密码**：
1. 登录 Microsoft 账号
2. 进入 [安全设置](https://account.microsoft.com/security)
3. 高级安全选项 → 应用密码
4. 生成应用密码

---

### 6. 企业邮箱

#### 腾讯企业邮箱

```env
MAIL_SERVER=smtp.exmail.qq.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=YOUR_EMAIL@company.com
MAIL_PASSWORD=YOUR_PASSWORD
MAIL_DEFAULT_SENDER=YOUR_EMAIL@company.com
```

#### 阿里企业邮箱

```env
MAIL_SERVER=smtp.mxhichina.com
MAIL_PORT=465
MAIL_USE_TLS=false
MAIL_USE_SSL=true
MAIL_USERNAME=YOUR_EMAIL@company.com
MAIL_PASSWORD=YOUR_PASSWORD
MAIL_DEFAULT_SENDER=YOUR_EMAIL@company.com
```

---

## 🔄 快速切换示例

### 示例：从 163 切换到 QQ 邮箱

**步骤 1**：注释掉 163 配置
```env
# MAIL_SERVER=smtp.163.com
# MAIL_PORT=465
# ...
```

**步骤 2**：取消 QQ 邮箱配置的注释
```env
MAIL_SERVER=smtp.qq.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USE_SSL=false
MAIL_USERNAME=123456789@qq.com
MAIL_PASSWORD=your_qq_authorization_code
MAIL_DEFAULT_SENDER=123456789@qq.com
```

**步骤 3**：重启 Flask 应用

---

## ✅ 验证配置

### 检查当前使用的邮箱配置

```bash
python test_163_config.py
```

### 测试发送邮件

```bash
python test_email_api.py
```

---

## 📊 各邮箱服务对比

| 邮箱服务商 | 端口 | SSL/TLS | 需要授权码 | 每日限制 | 备注 |
|-----------|------|---------|-----------|---------|------|
| 163 邮箱 | 465 | SSL | ✅ 是 | 500 封 | 国内常用 |
| 126 邮箱 | 465 | SSL | ✅ 是 | 500 封 | 163 同公司 |
| QQ 邮箱 | 587 | TLS | ✅ 是 | 500 封 | 国内常用 |
| Gmail | 587 | TLS | ✅ 是（应用密码） | 500 封 | 需开启两步验证 |
| Outlook | 587 | TLS | ✅ 是（应用密码） | 300 封 | Microsoft |
| 企业邮箱 | 587/465 | TLS/SSL | 可能 | 更高 | 需联系管理员 |

---

## ⚠️ 注意事项

1. **同时只能启用一个邮箱配置**
   - 确保只有一个邮箱配置没有被注释

2. **授权码/密码安全**
   - 不要将 `.env` 文件提交到代码仓库
   - 定期更换授权码

3. **配置修改后必须重启**
   - 修改 `.env` 文件后，需要重启 Flask 应用才能生效

4. **发送限制**
   - 注意各邮箱的每日/每小时发送限制
   - 避免触发限制导致账号被封

5. **网络环境**
   - Gmail 等国外邮箱可能需要科学上网
   - 企业邮箱需要确认 SMTP 服务是否开启

---

## 🔧 故障排除

### 问题：发送失败，提示认证错误

**解决方法**：
1. 检查授权码/密码是否正确
2. 确认是否使用了授权码（不是登录密码）
3. 检查邮箱服务是否已开启 SMTP

### 问题：连接超时

**解决方法**：
1. 检查端口是否正确
2. 尝试更换端口（如 465 改为 587）
3. 检查防火墙设置
4. 对于国外邮箱（如 Gmail），检查网络连接

### 问题：达到发送限制

**解决方法**：
1. 等待 24 小时自动解除
2. 考虑切换到另一个邮箱
3. 升级为 VIP 邮箱或企业邮箱
4. 使用专业的邮件服务商

---

## 📝 配置模板

如果需要添加新的邮箱服务商，可以参考以下模板：

```env
# ============================================================================
# 邮箱服务配置 - 新邮箱服务商
# ============================================================================
# MAIL_SERVER=smtp.example.com
# MAIL_PORT=587
# MAIL_USE_TLS=true
# MAIL_USE_SSL=false
# MAIL_USERNAME=YOUR_EMAIL@example.com
# MAIL_PASSWORD=YOUR_PASSWORD_OR_AUTH_CODE
# MAIL_DEFAULT_SENDER=YOUR_EMAIL@example.com
```

---

## 📞 获取帮助

如果遇到问题：
1. 查看对应邮箱服务商的官方文档
2. 检查 Flask 应用控制台的错误信息
3. 运行配置检查脚本：`python test_163_config.py`
4. 查看邮箱服务商是否提供了 SMTP 配置说明

